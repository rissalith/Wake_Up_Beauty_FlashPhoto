import{m as t}from"./index-CloVKrZX.js";import{a as e}from"./_plugin-vue_export-helper-DZWByd4S.js";const o=t("user",{state:()=>({token:localStorage.getItem("admin_token")||"",adminInfo:JSON.parse(localStorage.getItem("admin_info")||"null")}),getters:{isLoggedIn:t=>!!t.token},actions:{async login(t){const o=await e.login(t);return 0!==o.code&&200!==o.code||(this.token=o.data.token,this.adminInfo={id:o.data.adminId,username:o.data.username,role:o.data.role},localStorage.setItem("admin_token",o.data.token),localStorage.setItem("admin_info",JSON.stringify(this.adminInfo))),o},async getInfo(){const t=await e.getInfo();return 0!==t.code&&200!==t.code||(this.adminInfo=t.data),t},async logout(){try{await e.logout()}finally{this.token="",this.adminInfo=null,localStorage.removeItem("admin_token"),localStorage.removeItem("admin_info")}}}});export{o as u};
