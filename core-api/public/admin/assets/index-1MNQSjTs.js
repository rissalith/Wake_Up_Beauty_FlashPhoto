import{m as t}from"./index-DQJe672r.js";import{a as o}from"./_plugin-vue_export-helper-DhoNb-KX.js";const a=t("user",{state:()=>({token:localStorage.getItem("admin_token")||"",adminInfo:JSON.parse(localStorage.getItem("admin_info")||"null")}),getters:{isLoggedIn:t=>!!t.token},actions:{async login(t){const a=await o.login(t);return 0!==a.code&&200!==a.code||(this.token=a.data.token,this.adminInfo={id:a.data.adminId,username:a.data.username,role:a.data.role},localStorage.setItem("admin_token",a.data.token),localStorage.setItem("admin_info",JSON.stringify(this.adminInfo))),a},async getInfo(){const t=await o.getInfo();return 0!==t.code&&200!==t.code||(this.adminInfo=t.data),t},async logout(){try{await o.logout()}finally{this.token="",this.adminInfo=null,localStorage.removeItem("admin_token"),localStorage.removeItem("admin_info")}}}});export{a as u};
