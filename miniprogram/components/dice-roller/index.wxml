<!-- 摇骰子容器组件 - 横向布局版 -->
<view class="dice-roller">
  <!-- 主内容区：结果卡片 + 骰子 -->
  <view class="dice-main">
    <!-- 左侧：结果卡片 -->
    <view class="result-area">
      <block wx:if="{{result && !isRolling}}">
        <!-- 成语结果 -->
        <view class="phrase-card" wx:if="{{drawType === 'phrase'}}">
          <text class="phrase-text">{{result.phrase}}</text>
          <text class="phrase-en" wx:if="{{result.phrase_en}}">{{result.phrase_en}}</text>
        </view>
        <!-- 马品级结果 -->
        <view class="horse-card {{result.grade_key}}" wx:else>
          <image class="horse-img" src="{{result.image}}" mode="aspectFit" wx:if="{{result.image}}"/>
          <text class="horse-name {{result.image ? '' : 'no-image'}}">{{result.name}}</text>
        </view>
      </block>
      <!-- 未抽取时的占位 -->
      <view class="empty-placeholder" wx:else>
        <text class="empty-text">点击骰子抽取</text>
      </view>
    </view>

    <!-- 右侧：骰子/品级显示 -->
    <view class="dice-area">
      <view class="dice-wrapper {{result && !isRolling ? 'show-rarity rarity-' + (drawType === 'horse' ? (result.grade_key || 'common') : (result.rarity || 'common')) : ''}}" bindtap="onDiceTap">
        <!-- 抽取后显示品级 -->
        <block wx:if="{{result && !isRolling}}">
          <text class="rarity-text">{{drawType === 'horse' ? result.name : (result.rarity_name || '普通')}}</text>
        </block>
        <!-- 未抽取或抽取中显示骰子 -->
        <block wx:else>
          <dice-cube
            is-rolling="{{isRolling}}"
            current-face="{{currentDiceFace}}"
            size="{{80}}"
          />
        </block>
      </view>
      <!-- 状态提示 -->
      <view class="dice-status">
        <text class="status-text rolling" wx:if="{{isRolling}}">抽取中...</text>
        <text class="status-text" wx:elif="{{result}}">再摇一次</text>
        <text class="status-text" wx:else>点击抽取</text>
      </view>
      <!-- 费用提示 -->
      <view class="cost-hint">
        <text wx:if="{{freeCount > 0}}" class="free-tag">免费</text>
        <text wx:else class="cost-tag">{{costPerRoll}}醒币</text>
      </view>
    </view>
  </view>

  <!-- 付费确认弹窗 -->
  <view class="confirm-modal" wx:if="{{showPayConfirm}}">
    <view class="confirm-mask" bindtap="onCancelPay"></view>
    <view class="confirm-content">
      <view class="confirm-title">确认消耗醒币</view>
      <view class="confirm-desc">本次摇骰子将消耗 {{costPerRoll}} 醒币</view>
      <view class="confirm-balance">当前余额: {{userPoints}} 醒币</view>
      <view class="confirm-btns">
        <view class="confirm-btn cancel" bindtap="onCancelPay">取消</view>
        <view class="confirm-btn ok" bindtap="onConfirmPay">确认</view>
      </view>
    </view>
  </view>
</view>
