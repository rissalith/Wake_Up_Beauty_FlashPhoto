<!-- å……å€¼é¡µé¢ -->
<view class="container">
  <!-- iOS è™šæ‹Ÿæ”¯ä»˜æš‚æœªå¼€æ”¾æç¤º -->
  <view class="ios-notice" wx:if="{{isIOSPlatform}}">
    <view class="ios-notice-icon">ğŸ“±</view>
    <view class="ios-notice-content">
      <view class="ios-notice-title">{{i18n.iosNoticeTitle || 'iOSè™šæ‹Ÿæ”¯ä»˜æš‚æœªå¼€æ”¾'}}</view>
      <view class="ios-notice-desc">{{i18n.iosNoticeDesc || 'æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–é†’å¸ï¼š'}}</view>
      <view class="ios-notice-tips">
        <view class="ios-tip-item">â€¢ {{i18n.iosTip1 || 'ä½¿ç”¨å®‰å“è®¾å¤‡å……å€¼'}}</view>
        <view class="ios-tip-item">â€¢ {{i18n.iosTip2 || 'åˆ†äº«å°ç¨‹åºç»™å¥½å‹'}}</view>
        <view class="ios-tip-item">â€¢ {{i18n.iosTip3 || 'é‚€è¯·å¥½å‹æ³¨å†Œè·å¾—å¥–åŠ±'}}</view>
      </view>
    </view>
  </view>

  <!-- å½“å‰ä½™é¢ -->
  <view class="balance-section">
    <view class="balance-icon">âœ¦</view>
    <view class="balance-info">
      <text class="balance-label">{{i18n.currentPoints || 'å½“å‰é†’å¸'}}</text>
      <text class="balance-value">{{userPoints}}</text>
    </view>
  </view>

  <!-- å……å€¼å¥—é¤ -->
  <view class="section-title">{{i18n.selectPackage || 'é€‰æ‹©å……å€¼é‡‘é¢'}}</view>
  <view class="packages-grid">
    <view
      class="package-item {{selectedPackage && selectedPackage.id === item.id ? 'selected' : ''}}"
      wx:for="{{packages}}"
      wx:key="id"
      data-package="{{item}}"
      bindtap="selectPackage"
    >
      <view class="package-amount">Â¥{{item.amount}}</view>
      <view class="package-points">{{item.points}}{{i18n.pointsUnit || 'é†’å¸'}}</view>
      <view class="package-bonus" wx:if="{{item.bonus_points > 0}}">
        +{{item.bonus_points}}
      </view>
      <view class="package-check" wx:if="{{selectedPackage && selectedPackage.id === item.id}}">âœ“</view>
    </view>
  </view>

  <!-- è‡ªå®šä¹‰é‡‘é¢ -->
  <view class="custom-section">
    <view class="custom-header" bindtap="selectCustom">
      <view class="custom-radio {{isCustom ? 'selected' : ''}}">
        <view class="radio-inner" wx:if="{{isCustom}}"></view>
      </view>
      <text class="custom-label">{{i18n.customAmount || 'è‡ªå®šä¹‰é‡‘é¢'}}</text>
    </view>
    <view class="custom-input-wrap" wx:if="{{isCustom}}">
      <text class="input-prefix">Â¥</text>
      <input
        class="custom-input"
        type="number"
        placeholder="{{i18n.enterAmount || 'è¾“å…¥é‡‘é¢ï¼ˆ1-10000æ•´æ•°ï¼‰'}}"
        value="{{customAmount}}"
        bindinput="onCustomAmountInput"
      />
      <view class="input-suffix-wrap" wx:if="{{customAmount}}">
        <text class="input-suffix">= {{customPoints}}{{i18n.pointsUnit || 'é†’å¸'}}</text>
        <text class="input-bonus" wx:if="{{customBonusPoints > 0}}">+{{customBonusPoints}}</text>
      </view>
    </view>
  </view>

  <!-- è¯´æ˜ -->
  <view class="tips-section">
    <view class="tips-title">{{i18n.rechargeTips || 'å……å€¼è¯´æ˜'}}</view>
    <view class="tips-item">â€¢ {{i18n.rechargeTip1 || '1å…ƒ = 10é†’å¸'}}</view>
    <view class="tips-item">â€¢ {{i18n.rechargeTip2 || 'å……å€¼é‡‘é¢è¶Šå¤§ï¼Œèµ é€é†’å¸è¶Šå¤š'}}</view>
    <view class="tips-item">â€¢ {{i18n.rechargeTip3 || 'é†’å¸å¯ç”¨äºè´­ä¹°å°ç¨‹åºå†…æ‰€æœ‰æœåŠ¡'}}</view>
    <view class="tips-item">â€¢ {{i18n.rechargeTip4 || 'å……å€¼æˆåŠŸåç«‹å³åˆ°è´¦'}}</view>
  </view>
</view>

<!-- åº•éƒ¨æŒ‰é’® -->
<view class="footer-btn">
  <view class="btn-amount" wx:if="{{selectedPackage || (isCustom && customAmount)}}">
    <text>{{i18n.payAmount || 'æ”¯ä»˜é‡‘é¢'}}ï¼š</text>
    <text class="amount-value">Â¥{{isCustom ? customAmount : selectedPackage.amount}}</text>
  </view>
  <view class="recharge-btn {{loading ? 'disabled' : ''}}" bindtap="doRecharge">
    {{loading ? (i18n.processing || 'å¤„ç†ä¸­...') : (i18n.rechargeNow || 'ç«‹å³å……å€¼')}}
  </view>
</view>
