<!-- çœ‹è§†é¢‘å¾—é†’å¸é¡µé¢ -->
<custom-navbar title="{{i18n.title}}" back="{{true}}" />

<view class="container">
  <!-- é¡¶éƒ¨ä¿¡æ¯å¡ç‰‡ -->
  <view class="info-card">
    <view class="balance-section">
      <text class="balance-label">å½“å‰é†’å¸</text>
      <text class="balance-value">{{currentBalance}}</text>
    </view>
    <view class="divider"></view>
    <view class="today-section">
      <text class="today-label">{{i18n.todayEarned}}</text>
      <text class="today-value">{{todayCount * pointsPerVideo}}</text>
    </view>
  </view>

  <!-- è§†é¢‘åŒºåŸŸ -->
  <view class="video-section">
    <view class="video-container {{isWatching ? 'watching' : ''}}">
      <!-- è§†é¢‘å ä½ -->
      <view class="video-placeholder">
        <view class="play-icon" wx:if="{{!isWatching}}">â–¶</view>
        <view class="watching-animation" wx:else>
          <view class="wave wave1"></view>
          <view class="wave wave2"></view>
          <view class="wave wave3"></view>
        </view>
      </view>

      <!-- è¿›åº¦æ¡ -->
      <view class="progress-bar" wx:if="{{isWatching}}">
        <view class="progress-fill" style="width: {{watchProgress}}%"></view>
      </view>

      <!-- å€’è®¡æ—¶ -->
      <view class="countdown" wx:if="{{isWatching}}">
        <text>{{countdown}}s</text>
      </view>
    </view>

    <!-- å¥–åŠ±æç¤º -->
    <view class="reward-hint">
      <text class="hint-text">{{i18n.perVideo}}</text>
      <text class="hint-points">+{{pointsPerVideo}} {{i18n.points}}</text>
    </view>
  </view>

  <!-- è§‚çœ‹æŒ‰é’® -->
  <view class="action-section">
    <view class="watch-btn {{isWatching ? 'disabled' : ''}}" bindtap="{{isWatching ? '' : 'startWatching'}}">
      <text wx:if="{{!isWatching}}">{{i18n.watchVideo}}</text>
      <text wx:else>{{i18n.watching}} {{countdown}}s</text>
    </view>
  </view>

  <!-- è¯´æ˜ -->
  <view class="tips-section">
    <view class="tips-title">æ´»åŠ¨è¯´æ˜</view>
    <view class="tips-list">
      <view class="tip-item">
        <text class="tip-num">1</text>
        <text class="tip-text">è§‚çœ‹å®Œæ•´è§†é¢‘ï¼ˆ15ç§’ï¼‰å³å¯è·å¾—30é†’å¸</text>
      </view>
      <view class="tip-item">
        <text class="tip-num">2</text>
        <text class="tip-text">æ¯æ—¥è§‚çœ‹æ¬¡æ•°ä¸é™ï¼Œå¤šçœ‹å¤šå¾—</text>
      </view>
      <view class="tip-item">
        <text class="tip-num">3</text>
        <text class="tip-text">é†’å¸å¯ç”¨äºç”ŸæˆAIç…§ç‰‡</text>
      </view>
    </view>
  </view>
</view>

<!-- æˆåŠŸå¼¹çª— -->
<view class="success-modal" wx:if="{{showSuccess}}">
  <view class="success-mask" bindtap="closeSuccess"></view>
  <view class="success-content">
    <view class="success-icon">ğŸ‰</view>
    <view class="success-title">{{i18n.success}}</view>
    <view class="success-points">+{{earnedPoints}} {{i18n.points}}</view>
    <view class="success-balance">å½“å‰ä½™é¢: {{currentBalance}} é†’å¸</view>
    <view class="success-btns">
      <view class="success-btn continue" bindtap="continueWatch">{{i18n.continue}}</view>
      <view class="success-btn back" bindtap="closeSuccess">{{i18n.back}}</view>
    </view>
  </view>
</view>
