# 微信小程序审核检查清单

## ✅ 已符合的要求

### 1. 隐私政策
- [x] 有隐私政策弹窗 (`privacy-modal` 组件)
- [x] 包含完整的隐私政策和用户协议内容
- [x] 需要用户手动勾选"我已阅读"才能同意
- [x] 提供"不同意"选项

### 2. 账户注销
- [x] 有账户注销功能 (`delete-account` 页面)
- [x] 需要用户输入"确认注销"才能操作
- [x] 有二次确认弹窗

### 3. 登录方式
- [x] 使用 `wx.login` 静默登录，不强制获取头像昵称
- [x] 符合微信最新登录规范

### 4. 平台区分
- [x] iOS 使用虚拟支付 (`wx.requestVirtualPayment`)
- [x] Android 使用标准微信支付

---

## ⚠️ 需要检查/修改的问题

### 1. 强制登录问题 - 中风险
**现状**：首页强制显示登录弹窗，不登录无法使用
**审核风险**：可能被认为"强制收集用户信息"
**建议**：允许用户先浏览首页，在需要时再要求登录

### 2. iOS 虚拟支付配置 - 高风险
**需确认**：
- [ ] 已在微信公众平台开通虚拟支付功能
- [ ] 已配置 offerId（米大师 ID）
- [ ] 已完成虚拟支付签约

### 3. 隐私协议内容 - 中风险
**需检查**：
- [ ] 是否明确说明收集的信息类型
- [ ] 是否说明信息的使用目的
- [ ] 是否提供联系方式（客服/邮箱）
- [ ] 是否说明数据存储期限

### 4. 类目资质 - 高风险
**AI 证件照功能可能需要**：
- [ ] 摄影/图像处理类目
- [ ] 人脸识别资质（如涉及）

### 5. 内容安全 - 高风险
**需确认**：
- [ ] 上传照片是否经过内容安全检测
- [ ] 是否调用微信内容安全 API (`security.msgSecCheck`)

---

## 📋 审核前必做事项

1. **确认 iOS 虚拟支付已配置**
   - 登录微信公众平台 → 功能 → 虚拟支付
   - 确保 offerId 已配置到代码中

2. **添加内容安全检测**（如未实现）
   - 在上传照片前调用 `wx.cloud.callFunction` 进行图片安全检测

3. **补充隐私协议联系方式**
   - 在隐私政策中添加客服邮箱或联系方式

4. **确认类目资质**
   - 检查小程序后台已选择的服务类目
   - 如需人脸识别类目，需提供相关资质

---

## 🚫 常见被拒原因

| 原因 | 解决方案 |
|------|----------|
| 强制登录才能使用 | 允许游客浏览，需要时再登录 |
| iOS 充值功能异常 | 确保虚拟支付配置正确 |
| 隐私协议不完整 | 补充信息收集说明和联系方式 |
| 缺少内容安全审核 | 添加图片安全检测 |
| 类目不符 | 申请正确的服务类目 |
